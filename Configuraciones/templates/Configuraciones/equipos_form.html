{% extends "includes/base.html" %}
{% load static %}
{% block title %}Equipos{% endblock %}
{% block titulo-pagina %}Equipos{% endblock %}
;
{% block breadcrumb %}
    <ol class="breadcrumb float-sm-right ">
        <li class="breadcrumb-item">Configuraciones</li>
        <li class="breadcrumb-item">
            <a href="{% url 'equipos_listar' %}"
               class="text-muted text-decoration-none">Equipos</a>
        </li>
        <li class="breadcrumb-item active">
            {% if request.resolver_match.url_name == "equipos_editar" %}
                Editar
            {% else %}
                Agregar
            {% endif %}
        </li>
    </ol>
{% endblock %}
;
{% load crispy_forms_tags %}
{% block content %}
    <div class="row">
        <div class="col">
            <form id="form-equipos" novalidate method="POST">
                <!-- Security token -->
                {% csrf_token %}
                <div class="card card-primary card-outline">
                    <div class="card-header">
                        <h3 class="card-title">
                            {% if request.resolver_match.url_name == "equipos_editar" %}
                                Editar
                            {% else %}
                                Agregar
                            {% endif %}
                            Equipo
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">{{ form.nombre| as_crispy_field }}</div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">{{ form.fk_programa| as_crispy_field }}</div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">{{ form.fk_coordinador| as_crispy_field }}</div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">{{ form.m2m_usuarios| as_crispy_field }}</div>
                            </div>
                            <div class="col-12">
                                <div class="form-group">{{ form.observaciones| as_crispy_field }}</div>
                            </div>
                            <div class="col-12 {% if request.resolver_match.url_name != 'equipos_editar' %}d-none{% endif %}">
                                <div class="form-group">{{ form.estado| as_crispy_field }}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-4 mx-2">
                    <button type="submit" class="btn btn-primary mr-1">Confirmar</button>
                    <a href="{% url 'equipos_listar' %}" class="btn btn-secondary">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
{% endblock content %}
{% block customJS %}
    <script>
  $(document).ready(function () {
    // Función para aplicar estilos de error a los select2 que ya tienen la clase "is-invalid"
    function aplicarEstilosError() {
      $("#form-equipos select.is-invalid").each(function () {
        var select2Container = $(this).next(".select2").find(".select2-selection");
        select2Container.addClass('border-danger');
      });
    }

    // Llamar a la función para aplicar estilos de error al cargar la página
    aplicarEstilosError();

  });
    </script>
{% endblock customJS %}
