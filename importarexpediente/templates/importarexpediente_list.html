{% extends "includes/main.html" %}
{% load static %}
{% block title %}Organizaciones{% endblock %}
{% block breadcrumb %}
    <ol class="breadcrumb float-sm-right">
        <li class="breadcrumb-item">
            <a href="{% url 'importarexpedientes_list' %}">Importar Expedientes</a>
        </li>
        <li class="breadcrumb-item active">Listar</li>
    </ol>
{% endblock %}
{% block content %}
    <!-- Estilos modernos reutilizables para listados -->
    <link rel="stylesheet" href="{% static 'custom/css/listModerno.css' %}" />
    {% url 'importarexpedientes_ajax' as ajax_url %}
    {% include 'components/search_bar.html' with titulo='Buscar Expedientes de Pago' placeholder='Buscar por Usuario' help_text='Ingresar Usuario.' reset_url='importarexpedientes_list' ajax_search_mode=True ajax_url=ajax_url target_tbody_id='importarexpedientes-tbody' query=query %}
    <div class="action-buttons">
        <a href="{% url 'upload' %}"
           class="btn btn-primary"
           title="Importar Nuevo Archivo">
            <i class="fas fa-upload"></i>
            Importar Nuevo Archivo
        </a>
    </div>
    <div class="row mt-5 max-width-100">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <table class="table table-bordered table-striped projects">
                        <thead>
                            <tr>
                                <th class="sortable" data-column="numero_expediente_pago">
                                    Nº Expediente de Pago
                                    <i class="fas fa-sort sort-icon"></i>
                                </th>
                                <th class="sortable" data-column="nombre">
                                    Archivo
                                    <i class="fas fa-sort sort-icon"></i>
                                </th>
                                <th class="sortable" data-column="cuit">
                                    Usuario
                                    <i class="fas fa-sort sort-icon"></i>
                                </th>
                                <th class="sortable" data-column="telefono">
                                    Fecha de Subida
                                    <i class="fas fa-sort sort-icon"></i>
                                </th>
                                <th class="sortable" data-column="email">
                                    Válidos
                                    <i class="fas fa-sort sort-icon"></i>
                                </th>
                                <th class="sortable" data-column="email">
                                    Errores
                                    <i class="fas fa-sort sort-icon"></i>
                                </th>
                                <th class="sortable" data-column="email">
                                    Importacion Completada
                                    <i class="fas fa-sort sort-icon"></i>
                                </th>
                                <th style="width: 15%" class="notexport">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="importarexpedientes-tbody">
                            {% include 'partials/importarexpediente_list_rows.html' with importarexpedientes=archivos_importados %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div id="pagination-container">
        {% include 'components/pagination.html' with is_paginated=is_paginated page_obj=page_obj query=query prev_text='Volver' next_text='Continuar' %}
    </div>
{% endblock %}
{% block customJS %}
    <!-- Script de ordenamiento reutilizable para tablas -->
    <script src="{% static 'custom/js/listSort.js' %}"></script>
{% endblock %}
